<!--pages/empty-error-demo/index.wxml-->
<view class="page">
  <!-- 导航头部区 -->
  <view class="nav-header full-bleed">
    <view class="brand">🎭 Empty/Error 组件演示</view>
  </view>

  <!-- EmptyState 组件演示 -->
  <view class="demo-section">
    <view class="section-header">
      <text class="section-title">EmptyState 空状态组件</text>
    </view>
    
    <!-- 基础用法 -->
    <view class="demo-group">
      <text class="group-title">基础用法</text>
      <empty-state
        icon="📭"
        title="暂无内容"
        description="这里还没有任何内容"
        action-text="添加内容"
        action-icon="➕"
        bindaction="onEmptyAction">
      </empty-state>
    </view>

    <!-- 搜索结果为空 -->
    <view class="demo-group">
      <text class="group-title">搜索结果为空</text>
      <empty-state
        variant="search"
        icon="🔍"
        title="未找到相关内容"
        description="尝试使用其他关键词或调整筛选条件"
        action-text="清除搜索条件"
        action-icon="🔄"
        secondary-action-text="返回首页"
        bindaction="onSearchEmptyAction">
      </empty-state>
    </view>

    <!-- 紧凑模式 -->
    <view class="demo-group">
      <text class="group-title">紧凑模式</text>
      <empty-state
        variant="compact"
        icon="📊"
        title="暂无统计数据"
        description="选择其他时间范围试试">
      </empty-state>
    </view>
  </view>

  <!-- ErrorView 组件演示 -->
  <view class="demo-section">
    <view class="section-header">
      <text class="section-title">ErrorView 错误状态组件</text>
    </view>
    
    <!-- 网络错误 -->
    <view class="demo-group">
      <text class="group-title">网络错误</text>
      <error-view
        error="E_DEPENDENCY"
        retry-text="重试"
        feedback-text="反馈问题"
        retrying="{{retrying.network}}"
        bindretry="onRetryNetwork"
        bindfeedback="onFeedback">
      </error-view>
    </view>

    <!-- 权限错误 -->
    <view class="demo-group">
      <text class="group-title">权限错误</text>
      <error-view
        variant="compact"
        error="E_PERM"
        bindretry="onRetryPermission"
        bindfeedback="onFeedback">
      </error-view>
    </view>

    <!-- 自定义错误 -->
    <view class="demo-group">
      <text class="group-title">自定义错误</text>
      <error-view
        icon="🚧"
        title="功能维护中"
        message="此功能正在升级维护，请稍后再试"
        detail="请求ID: REQ-20250909-001"
        retry-text="刷新页面"
        feedback-text="联系客服"
        bindretry="onRetryCustom"
        bindfeedback="onFeedback">
      </error-view>
    </view>
  </view>

  <!-- 使用说明 -->
  <view class="demo-section">
    <view class="section-header">
      <text class="section-title">使用说明</text>
    </view>
    
    <view class="usage-info">
      <text class="info-title">EmptyState 空状态组件</text>
      <text class="info-content">
用于列表为空、搜索无结果等空状态场景。支持自定义图标、标题、描述和操作按钮。
      </text>
      
      <text class="info-title">ErrorView 错误状态组件</text>
      <text class="info-content">
用于接口错误、网络异常等错误状态场景。内置错误码映射，自动匹配合适的图标和文案。
      </text>
      
      <text class="info-title">变体说明</text>
      <text class="info-content">
• default: 默认样式，适合主要内容区域
• compact: 紧凑样式，适合卡片或小区域
• search: 搜索结果为空的特殊样式
• error/network/auth/permission: 错误类型变体
      </text>
    </view>
  </view>

  <!-- 操作日志 -->
  <view class="demo-section">
    <view class="section-header">
      <text class="section-title">操作日志</text>
    </view>
    <scroll-view class="log-container" scroll-y="true">
      <view class="log-item" wx:for="{{actionLogs}}" wx:key="index">
        <text class="log-time">{{item.time}}</text>
        <text class="log-content">{{item.content}}</text>
      </view>
    </scroll-view>
  </view>
</view>