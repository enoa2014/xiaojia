
<view class="nav-header">
  <view class="brand">🏠 小家服务中心</view>
  <view class="toolbar">
    <text class="tool" bindtap="wip">🔔</text>
    <text class="tool" bindtap="wip">💬</text>
    <text class="tool" bindtap="wip">⚙️</text>
    <text class="tool" bindtap="openRoleSwitcher">🧪</text>
  </view>
  
</view>

<view class="user-status">
  <view class="identity">
    <view class="avatar">{{user.avatar || '👩‍💼'}}</view>
    <view class="meta">
      <view class="name">{{user.name}}（{{user.roleName}}）</view>
      <view class="perm">权限：<text class="ok">{{user.permText}}</text></view>
    </view>
  </view>
  <view class="work">
    <view class="today">今日：{{user.todayDone}}/{{user.todayTotal}}</view>
    <view class="time">{{user.now}}</view>
  </view>
</view>

<view class="quick-actions" wx:if="{{!loading}}">
  <block wx:for="{{actions}}" wx:key="key">
    <view class="action-card" bindtap="onAction" data-key="{{item.key}}">
      <view class="icon">{{item.icon}}</view>
      <view class="title">{{item.title}}</view>
      <view class="subtitle">{{item.subtitle}}</view>
    </view>
  </block>
</view>

<view class="data-overview" wx:if="{{!loading}}">
  <view class="section-title">本月概况</view>
  <scroll-view scroll-x class="stats-container">
    <block wx:for="{{stats}}" wx:key="key">
      <view class="stats-card">
        <view class="label">{{item.label}}</view>
        <view class="value">{{item.value}}</view>
        <view class="trend">{{item.trend}}</view>
      </view>
    </block>
  </scroll-view>
  
</view>

<view class="task-reminders" wx:if="{{!loading}}">
  <view class="task-header">
    <view>📋 待办事项 ({{tasks.length}})</view>
    <view class="link" bindtap="wip">查看全部 〉</view>
  </view>
  <view class="task-list">
    <block wx:for="{{tasks}}" wx:key="id">
      <view class="task-item" style="--priority-color: {{item.color}};">
        <view class="task-title">{{item.title}}</view>
        <view class="task-desc">{{item.desc}}</view>
      </view>
    </block>
  </view>
</view>

<view class="recent-updates" wx:if="{{!loading}}">
  <view class="task-header">
    <view>🕐 最新动态</view>
    <view class="link" bindtap="wip">查看更多 〉</view>
  </view>
  <view class="timeline-container">
    <block wx:for="{{updates}}" wx:key="id">
      <view class="timeline-item">
        <view class="time">{{item.time}}</view>
        <view class="text">{{item.text}}</view>
      </view>
    </block>
  </view>
  </view>
<!-- 骨架屏 -->
<view wx:if="{{loading}}" class="skeleton">
  <view class="sk-qa">
    <view class="sk-card"></view>
    <view class="sk-card"></view>
    <view class="sk-card"></view>
    <view class="sk-card"></view>
  </view>
  <view class="sk-stats">
    <view class="sk-stat"></view>
    <view class="sk-stat"></view>
    <view class="sk-stat"></view>
  </view>
  <view class="sk-tasks">
    <view class="sk-task"></view>
    <view class="sk-task"></view>
    <view class="sk-task"></view>
  </view>
</view>
