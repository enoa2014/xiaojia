<view class="page register-page">
  <view class="nav-header nav-header--green full-bleed">
    <view class="brand">ğŸ“ ç”¨æˆ·æ³¨å†Œ</view>
  </view>

  <view wx:if="{{submitted}}" class="submit-result">
    <empty-state
      show="{{true}}"
      icon="â³"
      title="å·²æäº¤ï¼Œç­‰å¾…å®¡æ‰¹"
      description="æˆ‘ä»¬ä¼šå°½å¿«å®¡æ ¸ï¼Œè¯·ç¨ååœ¨é¦–é¡µæŸ¥çœ‹çŠ¶æ€"
      variant="compact">
    </empty-state>
    <view class="actions">
      <ui-button variant="primary" text="è¿”å›é¦–é¡µ" bindtap="goHome" />
    </view>
  </view>

  <view wx:else class="form">
    <view class="form-item">
      <text class="label">å§“å*</text>
      <input class="input" placeholder="è¯·è¾“å…¥å§“å" value="{{form.name}}" bindinput="onInput" data-field="name" />
      <text class="error" wx:if="{{errors.name}}">{{errors.name}}</text>
    </view>

    <view class="form-item">
      <text class="label">ç”µè¯*</text>
      <input class="input" type="number" placeholder="11ä½æ‰‹æœºå·" value="{{form.phone}}" bindinput="onInput" data-field="phone" />
      <text class="error" wx:if="{{errors.phone}}">{{errors.phone}}</text>
    </view>

    <view class="form-item">
      <text class="label">èº«ä»½è¯å·*</text>
      <input class="input" placeholder="18ä½èº«ä»½è¯å·" value="{{form.id_card}}" bindinput="onInput" data-field="id_card" />
      <text class="error" wx:if="{{errors.id_card}}">{{errors.id_card}}</text>
    </view>

    <view class="form-item">
      <text class="label">ç”³è¯·èº«ä»½*</text>
      <picker mode="selector" range="{{roleOptions}}" value="{{roleIndex}}" bindchange="onRoleChange">
        <view class="picker-value">{{ roleOptions[roleIndex] }}</view>
      </picker>
      <text class="error" wx:if="{{errors.applyRole}}">{{errors.applyRole}}</text>
    </view>

    <view wx:if="{{form.applyRole==='parent'}}" class="relative-section">
      <view class="section-title">äº²å±ä¿¡æ¯</view>
      <view class="form-item">
        <text class="label">æ‚£è€…å§“å*</text>
        <input class="input" placeholder="è¯·è¾“å…¥æ‚£è€…å§“å" value="{{form.relative.patientName}}" bindinput="onRelativeInput" data-field="patientName" />
        <text class="error" wx:if="{{errors['relative.patientName']}}">{{errors['relative.patientName']}}</text>
      </view>
      <view class="form-item">
        <text class="label">å…³ç³»*</text>
        <picker mode="selector" range="{{relationOptions}}" value="{{relationIndex}}" bindchange="onRelationChange">
          <view class="picker-value">{{ relationOptions[relationIndex] }}</view>
        </picker>
        <text class="error" wx:if="{{errors['relative.relation']}}">{{errors['relative.relation']}}</text>
      </view>
      <view class="form-item">
        <text class="label">æ‚£è€…èº«ä»½è¯å·*</text>
        <input class="input" placeholder="18ä½èº«ä»½è¯å·" value="{{form.relative.patientIdCard}}" bindinput="onRelativeInput" data-field="patientIdCard" />
        <text class="error" wx:if="{{errors['relative.patientIdCard']}}">{{errors['relative.patientIdCard']}}</text>
      </view>
    </view>

    <view class="submit-actions">
      <ui-button variant="primary" text="æäº¤" bindtap="onSubmit" />
    </view>
  </view>
</view>

