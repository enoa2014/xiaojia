<view class="page">
  <view class="nav-header {{theme && theme.headerBg || 'nav-header--green'}}">
    <view class="brand">🏠 入住登记</view>
    <view class="nav-actions"></view>
  </view>
  <ui-form-field 
    label="患者ID（可选）" 
    fieldId="patientId">
    <input 
      slot="control"
      class="input" 
      placeholder="patientId 或留空改填身份证" 
      value="{{patientId}}" 
      bindinput="onPatientId" />
  </ui-form-field>
  <ui-form-field 
    label="身份证（可选）"
    fieldId="id_card" 
    errorText="{{errors.identity || ''}}">
    <input 
      slot="control"
      class="input" 
      placeholder="用于匹配患者（与ID二选一）" 
      value="{{id_card}}" 
      bindinput="onIdCard" />
  </ui-form-field>
  <ui-form-field 
    label="入住日期"
    fieldId="checkInDate"
    required="{{true}}"
    errorText="{{errors.checkInDate || ''}}">
    <picker 
      slot="control"
      mode="date" 
      value="{{checkInDate}}" 
      bindchange="onCheckInDate">
      <view class="picker">{{checkInDate || '选择入住日期'}}</view>
    </picker>
  </ui-form-field>
  <ui-form-field 
    label="退住日期（可选）"
    fieldId="checkOutDate"
    errorText="{{errors.checkOutDate || ''}}">
    <picker 
      slot="control"
      mode="date" 
      value="{{checkOutDate}}" 
      bindchange="onCheckOutDate">
      <view class="picker">{{checkOutDate || '选择退住日期'}}</view>
    </picker>
  </ui-form-field>
  <view class="row">
    <ui-form-field 
      label="房间（可选）"
      fieldId="room"
      ext-class="col">
      <input 
        slot="control"
        class="input" 
        value="{{room}}" 
        bindinput="e=>setData({room:e.detail.value})" />
    </ui-form-field>
    <ui-form-field 
      label="床位（可选）"
      fieldId="bed"
      ext-class="col">
      <input 
        slot="control"
        class="input" 
        value="{{bed}}" 
        bindinput="e=>setData({bed:e.detail.value})" />
    </ui-form-field>
  </view>
  <ui-form-field 
    label="补助金额（元，可选）"
    fieldId="subsidy"
    errorText="{{errors.subsidy || ''}}">
    <input 
      slot="control"
      class="input" 
      type="digit" 
      placeholder="≥0，最多两位小数" 
      value="{{subsidy}}" 
      bindinput="onSubsidy" />
  </ui-form-field>
  <ui-form-field 
    label="入住人（可选）"
    fieldId="admitPersons">
    <input 
      slot="control"
      class="input" 
      placeholder="原样字符串" 
      value="{{admitPersons}}" 
      bindinput="e=>setData({admitPersons:e.detail.value})" />
  </ui-form-field>
  <ui-button 
    text="提交" 
    variant="primary" 
    size="md"
    loading="{{submitting}}"
    fullWidth="{{true}}"
    bindtap="onSubmit" />
</view>
