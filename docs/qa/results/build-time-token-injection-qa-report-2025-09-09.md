# QA Report: 构建期令牌注入（Story 7.17）

## 概览
- 目标：验证构建脚本从 tokens.md 注入到 tokens.wxss 的可用性、可复现性与兜底机制
- 结论：通过（PASS），附两项建议（非阻断）

## 执行环境
- Node.js + pnpm，本地命令执行
- 代码版本：当前工作副本（2025-09-09）

## 测试用例与结果
1) 正常构建
- 步骤：执行 `pnpm run build:tokens`
- 期望：输出解析数量、写入 tokens.wxss 成功
- 结果：通过；tokens 覆盖颜色/尺寸/阴影/动效/透明度

2) 失败兜底
- 步骤：临时破坏 tokens.md 令牌格式，执行构建
- 期望：脚本报错并恢复 tokens.wxss.backup
- 结果：通过；备份恢复提示可见

3) 关键令牌验证
- 步骤：移除必需 key（如 --color-primary-600）模拟
- 期望：构建失败并提示缺失关键令牌
- 结果：通过；错误信息明确

4) 文档与脚本联动
- 步骤：对照 README 使用说明
- 期望：包含命令/注意事项；与 package.json 一致
- 结果：通过

## 建议（非阻断）
- 解析格式：当前依赖反引号包裹的键值；如 tokens.md 改版为表格/YAML，需同步解析器
- 备份策略：备份文件可引入时间戳，保留最近 N 个版本

## 结论
- Gate: PASS（AC 全满足；建议项为体验增强）

