# Implementation Re-Test Report: Story 7.1 Tokens 与工具类全局化（复检）

- Date: 2025-09-08
- Story: docs/stories/7.1.tokens-and-utilities-globalization.md
- Gate Before: CONCERNS
- Gate After: PASS

## 复检范围（按 AC）
- AC-1 扩充 tokens.wxss：确认仍完整（品牌/语义/灰阶/角色/间距/圆角/阴影/动效/z-index/透明度）
- AC-2 app.wxss 全局引入与工具类：确认 @import 与工具类存在
- AC-3 首批页面替换：`activities/form.*`、`tenancies/form.*`、`stats/index.*` 无裸十六进制/渐变硬编码
- AC-4 文档追加“工具类映射”：`docs/uiux/design-system/tokens.md` 含对应章节

## 结论
- AC-1: PASS（tokens.wxss 内容完整）
- AC-2: PASS（app.wxss 引入与工具类齐全）
- AC-3: PASS（activities/form 与 stats/index 已改为 var()/工具类；tenancies/form 无裸十六进制）
- AC-4: PASS（tokens.md 新增“## 工具类映射”并列出 text/bg/shadow/rounded/padding/margin）

## 证据
- app 引入：`miniprogram/app.wxss` 第 2 行 `@import "styles/tokens.wxss";`
- 页面扫描：
  - HEX in activities/form.wxss → 无匹配
  - HEX in stats/index.wxss → 无匹配
  - HEX in tenancies/form.wxss → 无匹配
- 文档章节：`docs/uiux/design-system/tokens.md` 行 58 出现 "## 工具类映射"

## 复现命令
```sh
rg -n "@import.*styles/tokens.wxss" miniprogram/app.wxss
rg -n "#([0-9a-fA-F]{3,6})" miniprogram/pages/activities/form.wxss
rg -n "#([0-9a-fA-F]{3,6})" miniprogram/pages/stats/index.wxss
rg -n "#([0-9a-fA-F]{3,6})" miniprogram/pages/tenancies/form.wxss
rg -n "工具类映射" docs/uiux/design-system/tokens.md
```

## 备注
- 建议在后续页面改造时，沿用统一工具类与 tokens 策略；新增工具类需同步维护 tokens.md 的映射章节。

