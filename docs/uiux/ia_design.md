# 小家服务管理小程序 - 新IA设计方案

## 1. 新信息架构树

### 1.1 主体架构（基于角色权限分层）

```
小家服务管理中心
│
├── 🏠 工作台 (TabBar-1) ──────────── 角色化首页，快速操作入口
│   ├── 头部状态区
│   │   ├── 用户身份卡片（角色徽章+权限提示）
│   │   └── 消息通知中心（权限审批/活动提醒）
│   ├── 快速操作区（2x2网格）
│   │   ├── [档案速查] → 搜索直达详情页
│   │   ├── [快速记录] → 服务记录快速填写
│   │   ├── [今日活动] → 当日活动列表筛选
│   │   └── [紧急联系] → 应急联系人/医院信息
│   ├── 数据总览区（横向滑动卡片）
│   │   ├── 本月服务统计卡
│   │   ├── 待办事项统计卡
│   │   └── 活动参与统计卡
│   └── 最近更新区（垂直时间流）
│       ├── 最新档案变更
│       ├── 待审批申请
│       └── 活动状态更新
│
├── 👥 档案 (TabBar-2) ───────────── 患者档案管理核心
│   ├── 🔍 搜索入口（顶部固定）
│   │   ├── 智能搜索：姓名/ID后4位/病情关键词
│   │   ├── 高级筛选：年龄段/病情类型/入住状态
│   │   └── 快速标签：新入住/即将出院/长期住户
│   ├── 档案列表（分组展示）
│   │   ├── 🔥 优先关注（标星档案）
│   │   ├── 📍 当前在住（按楼栋分组）
│   │   └── 📋 历史档案（按时间分组）
│   └── 浮动主按钮：➕ 新建档案（社工+管理员可见）
│
├── ❤️ 服务 (TabBar-3) ───────────── 服务记录与跟踪
│   ├── 服务概览（今日/本周/本月切换）
│   ├── 快速记录入口
│   │   ├── 📝 探访记录
│   │   ├── 💚 心理支持  
│   │   ├── 📦 物资发放
│   │   ├── 🔗 医疗转介
│   │   └── 📞 电话随访
│   ├── 我的记录列表
│   │   ├── 📊 审核状态筛选
│   │   ├── 🕐 时间倒序展示
│   │   └── 🔄 草稿箱（未提交记录）
│   └── 团队记录（社工可见）
│
├── 📅 活动 (TabBar-4) ───────────── 活动管理与参与
│   ├── 活动日历视图（月/周切换）
│   ├── 活动状态筛选
│   │   ├── 🟢 报名中
│   │   ├── 🟡 即将开始
│   │   ├── 🔵 进行中
│   │   └── ⚪ 已结束
│   ├── 我的参与记录
│   │   ├── 已报名活动
│   │   ├── 签到历史
│   │   └── 活动反馈
│   └── 管理后台（社工+管理员）
│       ├── ➕ 创建活动
│       ├── 📊 活动统计
│       └── 👥 报名管理
│
└── 📊 统计 (TabBar-5) ───────────── 数据分析与导出
    ├── 仪表盘总览
    │   ├── 关键指标卡片组
    │   ├── 趋势图表（可交互）
    │   └── 同比环比分析
    ├── 专项分析
    │   ├── 📈 服务效果分析
    │   ├── 🏠 入住情况分析  
    │   ├── 🎯 活动参与分析
    │   └── 👥 志愿者效能分析
    ├── 导出中心
    │   ├── 📄 报表模板库
    │   ├── 🔧 自定义导出
    │   └── 📂 历史导出记录
    └── 权限管理（管理员专用）
        ├── 🔐 权限申请审批
        ├── 👤 用户角色管理
        └── 🛡️ 审计日志查询
```

### 1.2 二级入口映射

| 一级入口 | 二级页面 | 触发方式 | 权限控制 |
|----------|----------|----------|----------|
| 工作台 | 通知详情 | 点击消息卡片 | 按通知类型 |
| 工作台 | 搜索结果 | 档案速查输入 | 基础查看权限 |
| 档案 | 档案详情 | 列表项点击 | 分级权限展示 |
| 档案 | 权限申请 | 敏感字段点击 | 申请权限 |
| 档案 | 入住记录 | 详情页Tab切换 | 查看权限 |
| 服务 | 记录填写 | 快速记录/浮动按钮 | 填写权限 |
| 服务 | 记录详情 | 列表项点击 | 查看权限 |
| 活动 | 活动详情 | 列表项/日历点击 | 基础查看 |
| 活动 | 报名管理 | 详情页管理按钮 | 管理权限 |
| 统计 | 详细报表 | 卡片点击展开 | 查看权限 |
| 统计 | 权限审批 | 管理员入口 | 管理员专用 |

## 2. 导航策略

### 2.1 TabBar使用边界

**原则**: TabBar承载5个主要工作场景，每个Tab代表一个完整的工作流

| Tab位置 | 功能定位 | 使用场景 | 页面深度 |
|---------|----------|----------|----------|
| 工作台 | 信息中心+快速入口 | 每日工作开始，状态概览 | 1-2层 |
| 档案 | 患者信息管理 | 查询档案，维护信息 | 2-3层 |
| 服务 | 服务记录填写与管理 | 记录工作，跟踪进度 | 2-3层 |
| 活动 | 活动参与与管理 | 活动报名，组织管理 | 2-3层 |
| 统计 | 数据分析与导出 | 统计查看，决策支持 | 2-4层 |

**Tab切换动画**: 250ms ease-in-out，轻微缩放+渐显效果

### 2.2 二级页面导航

**导航栏组件设计**:
```css
.nav-bar {
  height: 88rpx;
  background: --color-bg-primary;
  border-bottom: 2rpx solid --color-gray-100;
  display: flex;
  align-items: center;
  padding: 0 24rpx;
}

.nav-back {
  width: 44rpx; height: 44rpx;
  color: --color-primary-600;
}

.nav-title {
  font-size: --font-size-h3;
  font-weight: --font-weight-medium;
  color: --color-gray-900;
  margin-left: 16rpx;
}

.nav-actions {
  margin-left: auto;
  display: flex;
  gap: 16rpx;
}
```

### 2.3 底部操作区使用边界

**固定底部操作栏**（适用场景）:
- 📋 表单提交（服务记录、档案编辑）
- 🎯 主要操作确认（活动报名、权限申请）
- 📄 批量操作（数据导出、批量审批）

**设计规范**:
```css
.bottom-actions {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 96rpx;
  background: --color-bg-primary;
  border-top: 2rpx solid --color-gray-100;
  padding: 16rpx 24rpx;
  display: flex;
  gap: 16rpx;
  z-index: 1000;
}

.primary-button {
  flex: 1;
  height: 64rpx;
  background: --color-primary-600;
  color: white;
  border-radius: --radius-md;
}
```

### 2.4 浮动主按钮使用边界

**使用场景**:
- ➕ 创建档案（档案页面）
- ➕ 快速记录（服务页面）
- ➕ 创建活动（活动管理页面）

**位置规范**:
```css
.fab {
  position: fixed;
  bottom: 120rpx; /* 避开TabBar */
  right: 24rpx;
  width: 96rpx;
  height: 96rpx;
  border-radius: 48rpx;
  background: --color-primary-600;
  box-shadow: --shadow-lg;
  z-index: 999;
}
```

## 3. 首页蓝图设计

### 3.1 整体布局结构

```
┌─────────────────────────────────────┐ ← 状态栏
│  9:41      WiFi  ■■■■  100%        │
├─────────────────────────────────────┤ ← 导航区 (88rpx)
│ 小家服务中心         🔔 💬 ⚙️     │   background: --color-primary-600
│                                     │   color: white
├─────────────────────────────────────┤ ← 用户状态区 (120rpx)
│ 👤 张社工 (社工)     📊 今日: 5/12   │   padding: 24rpx
│ 权限正常 ✅          ⏰ 14:30      │   background: --color-primary-50
└─────────────────────────────────────┘
├─────────────────────────────────────┤ ← 快速操作区 (280rpx)
│                                     │   padding: 24rpx
│ ┌──────────┐ ┌──────────┐          │   gap: 16rpx
│ │ 🔍档案速查 │ │ ❤️快速记录 │          │   
│ │ 快速定位  │ │ 服务登记  │          │   
│ └──────────┘ └──────────┘          │   
│ ┌──────────┐ ┌──────────┐          │   
│ │ 📅今日活动 │ │ 🚨紧急联系 │          │   
│ │ 2个进行中 │ │ 医院/家属  │          │   
│ └──────────┘ └──────────┘          │   
├─────────────────────────────────────┤ ← 数据总览区 (160rpx)
│ 本月概况 ────────────────────〉     │   可左右滑动
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐      │   
│ │服务│ │档案│ │活动│ │更多│      │   
│ │127│ │ 48 │ │ 23 │ │ .. │      │   
│ │+15%│ │ +3 │ │ +8 │ │    │      │   
│ └────┘ └────┘ └────┘ └────┘      │   
├─────────────────────────────────────┤ ← 任务提醒区 (动态高度)
│ 📋 待办事项 (3)       查看全部 〉   │   
│ ┌─ 🟡 李小明档案权限待审批           │   
│ │   申请时间: 09:15  剩余: 6小时    │   
│ ├─ 🔴 王大伟入住申请待处理           │   
│ │   提交时间: 昨天    优先级: 高    │   
│ └─ 🟢 周末亲子活动报名即将截止       │   
│     截止时间: 明天18:00  已报12人   │   
├─────────────────────────────────────┤ ← 最近更新区 (动态高度)
│ 🕐 最新动态          查看更多 〉    │   
│ ┌─ 15:30 陈志愿者 提交了探访记录    │   
│ ├─ 14:45 活动"康复训练"状态变更    │   
│ ├─ 13:20 新患者"赵小朋友"建档完成  │   
│ └─ 12:10 数据导出"8月服务报表"完成  │   
└─────────────────────────────────────┘ ← 底部TabBar (96rpx)
│ [🏠工作台] [👥档案] [❤️服务] [📅活动] [📊统计] │
└─────────────────────────────────────┘
```

### 3.2 各区域详细设计

#### 3.2.1 头部状态区 (Header Status)

**设计要点**:
- **用户身份卡片**: 头像+姓名+角色徽章+权限状态
- **实时统计**: 今日工作进度+当前时间
- **状态指示器**: 网络状态+权限状态+消息数量

**交互行为**:
- 点击用户卡片 → 个人设置页面
- 点击统计数据 → 个人工作详情
- 点击消息图标 → 消息通知列表

#### 3.2.2 快速操作区 (Quick Actions)

**2x2网格布局**，每个操作卡片包含：
```css
.quick-action-card {
  width: calc(50% - 8rpx);
  height: 120rpx;
  background: white;
  border-radius: --radius-lg;
  box-shadow: --shadow-sm;
  padding: 20rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
}
```

**卡片交互设计**:
- **点击反馈**: 150ms 缩放动画 (0.95 → 1.0)
- **加载状态**: 显示loading图标，保持卡片结构
- **权限不足**: 卡片变灰，显示权限提示

#### 3.2.3 数据总览区 (Data Overview)

**横向滑动卡片设计**:
```css
.stats-container {
  display: flex;
  overflow-x: auto;
  padding: 0 24rpx;
  gap: 16rpx;
  scroll-snap-type: x mandatory;
}

.stats-card {
  min-width: 160rpx;
  height: 120rpx;
  scroll-snap-align: start;
  background: gradient;
  border-radius: --radius-lg;
  padding: 20rpx;
  color: white;
}
```

**数据更新策略**:
- 每次进入首页自动刷新
- 上拉刷新手势支持
- 异常时显示"--"占位

#### 3.2.4 任务提醒区 (Task Reminders)

**动态高度设计**，根据待办事项数量调整：
- 0个待办: 显示"暂无待办事项"空态
- 1-3个: 直接展示，高度自适应
- 4+个: 显示前3个+"查看全部N个"

**优先级颜色系统**:
- 🔴 高优先级: --color-error-500
- 🟡 中优先级: --color-warning-500
- 🟢 低优先级: --color-success-500

#### 3.2.5 最近更新区 (Recent Updates)

**时间线设计**:
```css
.timeline-item {
  display: flex;
  padding: 12rpx 0;
  border-left: 4rpx solid --color-gray-200;
  padding-left: 20rpx;
  margin-left: 8rpx;
}

.timeline-time {
  font-size: --font-size-caption;
  color: --color-gray-500;
  min-width: 80rpx;
}
```

## 4. 角色视图差异设计

### 4.1 管理员视图 (Admin View)

**独有权限展示**:
- 权限管理入口（统计Tab内）
- 所有用户数据访问
- 系统配置功能

**首页差异化**:
```
┌─────────────────────────────────────┐
│ 👨‍💼 王管理员 (管理员)  📊 系统: 正常   │ ← 显示系统状态
│ 全部权限 ✅           在线: 12人     │
├─────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐          │
│ │ 🔍全局搜索 │ │ 🛡️权限审批 │          │ ← 全局搜索权限
│ │ 跨角色查询 │ │ 3个待处理 │          │
│ └──────────┘ └──────────┘          │
│ ┌──────────┐ ┌──────────┐          │
│ │ 📊系统统计 │ │ ⚙️系统设置 │          │ ← 系统级功能
│ │ 实时监控  │ │ 配置管理  │          │
│ └──────────┘ └──────────┘          │
└─────────────────────────────────────┘
```

**5秒可达目标路径**:
- 审批权限申请: `首页 → 权限审批卡片 → 审批详情 → 通过/拒绝` ⚡ 3步
- 查看全局统计: `首页 → 系统统计卡片 → 详细报表` ⚡ 2步  
- 用户权限管理: `首页 → 统计Tab → 权限管理 → 用户列表` ⚡ 3步

### 4.2 社工视图 (Social Worker View)

**核心工作场景**:
- 档案管理权限（创建、编辑、审核）
- 服务记录审核
- 活动组织管理

**首页差异化**:
```
┌─────────────────────────────────────┐
│ 👩‍💼 李社工 (社工)      📊 今日: 8/15   │ ← 工作量显示
│ 审核权限 ✅           待审: 2个     │
├─────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐          │
│ │ 📁档案管理 │ │ ✅服务审核 │          │ ← 审核功能突出
│ │ 新建+编辑 │ │ 2个待审核 │          │
│ └──────────┘ └──────────┘          │
│ ┌──────────┐ ┌──────────┐          │
│ │ 🎯活动组织 │ │ 📞家属联系 │          │ ← 组织协调功能
│ │ 创建+管理 │ │ 紧急联系人 │          │
│ └──────────┘ └──────────┘          │
└─────────────────────────────────────┘
```

**5秒可达目标路径**:
- 审核服务记录: `首页 → 服务审核卡片 → 记录详情 → 审核操作` ⚡ 3步
- 创建患者档案: `档案Tab → 浮动➕按钮 → 档案表单` ⚡ 2步
- 组织新活动: `活动Tab → 管理后台 → 创建活动` ⚡ 2步

### 4.3 志愿者视图 (Volunteer View)

**核心工作场景**:
- 服务记录填写
- 活动参与
- 基础档案查看

**首页差异化**:
```
┌─────────────────────────────────────┐
│ 👦 张志愿者 (志愿者)   📊 本月: 12次  │ ← 服务次数统计
│ 基础权限 ✅          下次: 周三     │
├─────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐          │
│ │ ❤️服务记录 │ │ 👥档案查看 │          │ ← 基础查看权限
│ │ 快速填写  │ │ 脱敏显示  │          │
│ └──────────┘ └──────────┘          │
│ ┌──────────┐ ┌──────────┐          │
│ │ 📅我的活动 │ │ 📚服务指南 │          │ ← 学习支持功能
│ │ 已报名3个 │ │ 操作手册  │          │
│ └──────────┘ └──────────┘          │
└─────────────────────────────────────┘
```

**5秒可达目标路径**:
- 填写服务记录: `首页 → 服务记录卡片 → 快速记录表单` ⚡ 2步
- 查看患者档案: `档案Tab → 搜索患者 → 档案详情` ⚡ 2步
- 报名活动: `活动Tab → 选择活动 → 报名确认` ⚡ 2步

### 4.4 家长视图 (Parent View)

**核心需求场景**:
- 查看自己孩子的档案
- 参与相关活动
- 了解服务进展

**首页差异化**:
```
┌─────────────────────────────────────┐
│ 👨‍👩‍👧‍👦 小明爸爸 (家长)    📊 关注: 1人  │ ← 关注患者数
│ 家属权限 ✅          最新: 2小时前   │
├─────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐          │
│ │ 👶我的孩子 │ │ 📋服务记录 │          │ ← 孩子信息优先
│ │ 李小明   │ │ 查看进展  │          │
│ └──────────┘ └──────────┘          │
│ ┌──────────┐ ┌──────────┐          │
│ │ 🎈亲子活动 │ │ 💬互助社区 │          │ ← 家庭支持功能
│ │ 可参与3个 │ │ 经验分享  │          │
│ └──────────┘ └──────────┘          │
└─────────────────────────────────────┘
```

**5秒可达目标路径**:
- 查看孩子信息: `首页 → 我的孩子卡片 → 档案详情` ⚡ 2步
- 报名亲子活动: `首页 → 亲子活动卡片 → 活动列表 → 报名` ⚡ 3步
- 查看服务进展: `首页 → 服务记录卡片 → 相关记录列表` ⚡ 2步

## 5. 核心页面ASCII草图

### 5.1 档案列表页 (重设计)

```
┌─────────────────────────────────────┐
│ ← 患者档案           🔍 ⋯ ➕       │ ← 导航+搜索+新建
├─────────────────────────────────────┤
│ 🔍 快速搜索患者档案...               │ ← 智能搜索框
│ [全部] [在住] [即将出院] [历史]      │ ← 状态快速筛选
├─────────────────────────────────────┤
│ ⭐ 优先关注 (3)                     │ ← 分组标题
│ ┌─────────────────────────────────┐ │
│ │ 🟡 李*明 8岁 白血病              │ │ ← 脱敏显示
│ │ 📍 3号楼205  📅 入住15天        │ │   权限提示
│ │ ❤️ 今日有探访  [申请查看全部信息] │ │   操作按钮
│ └─────────────────────────────────┘ │
│                                     │
│ 🏠 当前在住 - 3号楼 (5)             │
│ ┌─────────────────────────────────┐ │
│ │ 王*伟 6岁 脑瘤  📅 入住8天      │ │ ← 简化卡片
│ │ 206床 | 服务2次 | [查看] [权限]  │ │   快速操作
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 赵*朋友 4岁 骨肉瘤 📅 入住3天   │ │
│ │ 208床 | 新建档案 | [查看] [编辑] │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 📚 历史档案 (已出院)                │
│ └─ 显示最近10个，点击查看更多...     │
└─────────────────────────────────────┘
```

### 5.2 服务记录页 (重设计)

```
┌─────────────────────────────────────┐
│ ← 服务记录           📊 ⚙️ ➕       │ ← 统计+设置+新建
├─────────────────────────────────────┤
│ 📈 本周概况: 已完成 8次服务 (+3次)    │ ← 进度展示
│ [今日] [本周] [本月] [全部]          │ ← 时间筛选
├─────────────────────────────────────┤
│ ⚡ 快速记录                         │ ← 快速操作区
│ ┌──────┐┌──────┐┌──────┐┌──────┐  │
│ │📝探访││💚心理││📦物资││🔗转介│  │ ← 服务类型
│ └──────┘└──────┘└──────┘└──────┘  │   快速选择
├─────────────────────────────────────┤
│ 我的服务记录                        │ ← 记录列表
│                                     │
│ ┌─ 🟢 14:30 心理支持 - 李小明       │ ← 状态+时间+类型
│ │   已通过审核 ✅ 查看详情           │
│ ├─ 🟡 13:15 物资发放 - 王大伟       │
│ │   等待审核中 ⏳ 编辑记录           │
│ ├─ 🔴 12:00 医疗转介 - 赵小朋友     │
│ │   需要补充信息 ❌ 重新提交         │
│ └─ 💾 09:45 探访记录 - 草稿箱       │ ← 未提交记录
│     继续编辑...                    │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │          加载更多记录            │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 5.3 活动详情页 (重设计)

```
┌─────────────────────────────────────┐
│ ← 亲子康复训练营      ❤️ 📤 ⋯      │ ← 收藏+分享+更多
├─────────────────────────────────────┤
│ 🟢 报名中            📅 本周六 9:00  │ ← 状态+时间
│ 📍 康复训练室         👥 12/20人    │ ← 地点+人数
├─────────────────────────────────────┤
│ 📷 [活动图片轮播区域]                │ ← 图片展示
├─────────────────────────────────────┤
│ 📋 活动详情                         │
│ 通过专业的康复训练，帮助患儿改善运动  │
│ 能力，增强体质。活动由资深康复师指导， │
│ 家长可全程陪伴参与。               │
│                                     │
│ 🎯 适合对象: 3-12岁患儿及家长       │
│ ⏰ 持续时间: 2小时                 │
│ 👨‍⚕️ 指导老师: 康复科张医生           │
│ 📞 联系电话: 138****5678           │
├─────────────────────────────────────┤
│ 👥 报名情况 (12/20)      查看名单〉│ ← 报名统计
│ ┌─── 最近报名 ──┐                  │
│ │ 李小明妈妈 2小时前                │ ← 最新报名
│ │ 王大伟爸爸 3小时前                │
│ │ 赵小朋友家长 昨天                │
│ └──────────────┘                  │
├─────────────────────────────────────┤
│ ⚠️ 温馨提示                        │
│ • 请提前10分钟到达现场              │
│ • 建议穿着运动服装                 │
│ • 家长需全程陪同                   │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐ ← 底部操作栏
│ [❤️ 收藏]    [👥 12人已报名]        │ ← 状态显示+操作
└─────────────────────────────────────┘
```

## 6. 关键体验优化建议

### 6.1 权限申请体验优化

**简化申请流程**:
```
当前: 点击敏感字段 → 弹窗 → 填写理由 → 提交 → 等待审批
优化: 点击敏感字段 → 一键申请 → 智能填充理由 → 快速审批
```

**申请状态可视化**:
- 申请中: 显示进度条+预计审批时间
- 已通过: 显示倒计时+到期提醒
- 已拒绝: 显示拒绝原因+重新申请指引

### 6.2 搜索体验增强

**智能搜索建议**:
- 输入时实时显示匹配结果
- 支持模糊匹配和拼音搜索
- 记住搜索历史和常用筛选

### 6.3 消息通知系统

**分类通知展示**:
- 🔴 紧急: 医疗状况变化、紧急审批
- 🟡 重要: 权限申请结果、活动提醒
- 🟢 一般: 系统更新、活动通知

**通知交互优化**:
- 支持批量标记已读
- 快速操作：直接审批、快速回复
- 智能提醒：基于工作时间推送

这套新的IA设计基于角色导向和任务优先的原则，通过简化导航层级、优化关键流程，预期能将用户主要操作的完成时间从原来的2-3分钟缩短到30秒-1分钟以内。
