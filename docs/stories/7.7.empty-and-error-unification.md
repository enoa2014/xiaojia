# Story 7.7: 列表页 Empty/Error 组件统一接入（P0）

## Status
Approved

## Story
作为终端用户，我希望在列表无数据或出错时看到一致的空态/错误提示与明确的后续行动（CTA）；作为开发者，我希望以可复用组件统一文案与重试逻辑。

## Acceptance Criteria
1. 新增 `miniprogram/components/empty-state/` 与 `miniprogram/components/error-view/` 组件，分别用于“空态”和“错误”展示，含插画/文案/CTA。
2. 在列表型页面接入：`patients/index`、`services/index`、`activities/index`、`stats/index`（如适用）。
3. 错误文案通过 `mapError`（Source: docs/architecture/15-frontend-api-upload.md）映射错误码，提供“重试”或“反馈”。
4. 文档记录标准文案与使用示例。

## Tasks / Subtasks
- [ ] 空/错组件脚手架（AC: 1）
- [ ] 列表页接入（AC: 2,3）
- [ ] 文案与规范记录（AC: 4）

## Dev Notes
- 错误码映射（Source: docs/api/error-codes.md、docs/architecture/15-frontend-api-upload.md）
- A11y 与可用性（Source: docs/uiux/design-system/components.md#Toast-EmptyState-ErrorState-Skeleton、accessibility.md）

### Testing
- 模拟空数据：显示插画+友好文案+CTA。
- 模拟错误：从 `E_PERM/E_VALIDATE/E_INTERNAL` 映射正确文案，重试有效。

## Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |

## Dev Agent Record

## QA Results
