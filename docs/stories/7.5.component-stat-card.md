# Story 7.5: 组件库 - StatCard 组件落地与替换（P0）

## Status
Completed

## Story
作为终端用户，我希望统计类数字以一致的卡片样式展示，包含主值、标签与可选图标，便于快速扫读；作为开发者，我希望用可复用的 StatCard 组件统一尺寸、间距与状态。

## Acceptance Criteria
1. 新增 `miniprogram/components/stat-card/` 组件，支持 `value`、`label`、`icon?`、`variant?` 属性；尺寸与间距对齐设计系统。
2. 统计页（`pages/stats/index`）与首页数据总览区优先替换为该组件。
3. 空数据/加载中时有占位表现（与 Skeleton/Empty 规范一致）。
4. 文档与示例补齐。

## Tasks / Subtasks
- [x] 脚手架与实现（AC: 1）
- [x] 替换 stats/index 与首页（AC: 2）
- [x] 空/加载状态（AC: 3）
- [x] 文档更新（AC: 4）

## Dev Notes
- 组件与目录（Source: docs/architecture/01-frontend.md、docs/process/coding-standards.md）
- 设计规范（Source: docs/uiux/design-system/components.md#kpi-card、#Toast-EmptyState-ErrorState-Skeleton）
- 测试策略：弱网骨架 ≤300ms（Source: docs/process/coding-standards.md）

### Testing
- 渲染正确性：不同 `value/label` 渲染无截断；RTL/长文案兼容（如有）。
- 状态：空/加载/正常三态切换正确。

## Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |
| 2025-09-08 | 1.0     | 实施完成 + QA通过（A11y/交互增强）            | BMAD   |

## Dev Agent Record

### Agent Model Used
- Claude Sonnet 4 (claude-sonnet-4-20250514)

### Completion Notes
- ✅ **StatCard组件创建**：在 `miniprogram/components/stat-card/` 实现完整组件结构
- ✅ **组件属性**：支持 value、label、icon、variant、loading、empty 属性
- ✅ **多变体支持**：default、primary、success、warning、danger、info 6种变体
- ✅ **状态处理**：骨架屏加载动画、空数据占位、正常交互状态
- ✅ **页面集成**：已替换 stats/index KPI区域和快速统计区域
- ✅ **页面集成**：已替换 index/index 数据总览区域
- ✅ **设计系统一致性**：使用tokens.md定义的颜色、间距、圆角、阴影规范
- ✅ **文档更新**：在 components.md 中添加完整组件规范和使用示例

### File List
- `miniprogram/components/stat-card/index.js` - 组件逻辑实现
- `miniprogram/components/stat-card/index.json` - 组件配置文件  
- `miniprogram/components/stat-card/index.wxml` - 组件模板
- `miniprogram/components/stat-card/index.wxss` - 组件样式实现
- `miniprogram/pages/stats/index.json` - 添加stat-card组件引用
- `miniprogram/pages/stats/index.wxml` - 替换KPI卡片使用StatCard组件
- `miniprogram/pages/stats/index.wxss` - 更新样式适配新组件
- `miniprogram/pages/index/index.json` - 添加stat-card组件引用
- `miniprogram/pages/index/index.wxml` - 替换数据总览卡片使用StatCard组件
- `miniprogram/pages/index/index.wxss` - 清理旧卡片样式
- `docs/uiux/design-system/components.md` - 添加StatCard组件完整规范

### Change Log
- 2025-09-09: 创建StatCard组件，替换页面中统计卡片实现，更新设计系统文档

## QA Results

- Result: Passed
- Test Plan: docs/qa/test-plan-stat-card.md
- QA Report: docs/qa/results/stat-card-qa-report-2025-09-08.md
- Notes:
  - 新增 A11y：按状态设置 role/aria-label；loading/empty 禁止点击
  - Label 过长增加省略号，避免布局破坏
