# Story 7.17: 构建期令牌注入方案（P2）

## Status
Approved

## Story
作为前端开发者，我希望在构建期将设计 Tokens 注入到 WXSS 工具类与组件样式，缓解 WXSS 对 CSS 变量/媒体查询的限制，从而提升 Tokens 的落地一致性与维护效率。

## Acceptance Criteria
1. 设计并验证一条最小可用的构建流程（脚本或预处理），能将 `docs/uiux/design-system/tokens.md` 的配置注入到 `miniprogram/styles/tokens.wxss` 与工具类输出。
2. 本地构建命令可复现（如 `pnpm run build:tokens` 或集成到现有 build 流程），并在 README/文档中说明使用方法与注意事项。
3. 不改变运行时逻辑，不引入破坏性变更；失败时有兜底（保留上次成功产物）。

## Tasks / Subtasks
- [ ] 调研与脚本原型（AC: 1）
- [ ] 集成到构建流程（AC: 2）
- [ ] 失败兜底与文档（AC: 3）

## Dev Notes
- 构建与脚本（Source: docs/architecture/18-package-scripts.md、package.json scripts）
- Tokens 定义（Source: docs/uiux/design-system/tokens.md）

### Testing
- 在不同 Tokens 取值下重新构建，验证工具类与页面渲染一致；失败情况下能回退。

## Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |

## Dev Agent Record

## QA Results
