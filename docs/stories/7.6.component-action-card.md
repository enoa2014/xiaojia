# Story 7.6: 组件库 - ActionCard 组件落地与替换（P0）

## Status
Completed

## Story
作为终端用户，我希望常用操作以一致的卡片或网格按钮形式呈现，提示清晰并有统一的按压反馈；作为开发者，我希望以 ActionCard 组件统一栅格、间距与状态。

## Acceptance Criteria
1. 新增 `miniprogram/components/action-card/` 组件，支持 `title`、`desc?`、`icon?`、`to?`/`bindtap`、`disabled?`、`loading?`。
2. 首页快速操作区及服务/活动入口使用该组件替换散落的自定义块。
3. 按压/禁用/加载状态与动效遵循 Tokens 与 Components 规范。
4. A11y：触达尺寸≥88rpx，文本对比度达标。

## Tasks / Subtasks
- [ ] 组件脚手架与样式（AC: 1,3,4）
- [ ] 首页与服务/活动入口替换（AC: 2）
- [ ] 文档：属性说明与示例（AC: 3）

## Dev Notes
- 组件与规范（Source: docs/architecture/01-frontend.md、docs/uiux/design-system/components.md）
- 动效与阴影使用 Tokens（Source: docs/uiux/design-system/tokens.md#动画-阴影）

### Testing
- 交互：按压反馈（scale/easing）符合规范；禁用/加载态可视化明确。
- 回归：替换后页面布局不破版，点击跳转正确。

## Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |

## Dev Agent Record

### 完成状态
✅ 所有任务已完成

### 实现详情

**组件实现 (AC: 1,3,4)**
- ✅ 创建 `miniprogram/components/action-card/` 组件目录结构
- ✅ 支持完整属性：`title`, `desc`, `icon`, `disabled`, `loading`, `customData`, `ariaLabel`
- ✅ 基于设计系统tokens实现样式，使用 `--space-*`, `--radius-*`, `--shadow-*` 等
- ✅ 按压反馈：`scale(0.98)` 与 `translateY(-2rpx)` 组合动效
- ✅ 禁用状态：`opacity: var(--opacity-disabled)` + 无交互
- ✅ 加载状态：spinner 动画 + 禁用点击
- ✅ A11y支持：`role="button"`, 动态`aria-label`, 最小触摸区域88rpx

**页面替换 (AC: 2)**
- ✅ 首页快速操作区域：替换原有`.action-card`自定义块为ActionCard组件
- ✅ 服务页面快速记录：替换`.quick-btn`为ActionCard组件，2列网格布局
- ✅ 活动页面类型入口：替换`.type-card`为ActionCard组件，2列网格布局
- ✅ 保持原有功能：点击事件、数据传递、样式状态完全兼容

**文档与演示 (AC: 3)**
- ✅ 创建演示页面：`pages/action-card-demo/` 完整演示组件功能
- ✅ 包含基础用法、状态演示、快速操作、服务类型等场景
- ✅ 交互日志记录，便于调试和验证

### File List
- `miniprogram/components/action-card/index.wxml` - 组件模板
- `miniprogram/components/action-card/index.wxss` - 组件样式
- `miniprogram/components/action-card/index.js` - 组件逻辑
- `miniprogram/components/action-card/index.json` - 组件配置
- `miniprogram/pages/index/index.json` - 首页组件引入
- `miniprogram/pages/index/index.wxml` - 首页模板更新
- `miniprogram/pages/index/index.wxss` - 首页样式更新  
- `miniprogram/pages/services/index.json` - 服务页面组件引入
- `miniprogram/pages/services/index.wxml` - 服务页面模板更新
- `miniprogram/pages/services/index.wxss` - 服务页面样式更新
- `miniprogram/pages/activities/index.json` - 活动页面组件引入
- `miniprogram/pages/activities/index.wxml` - 活动页面模板更新
- `miniprogram/pages/activities/index.wxss` - 活动页面样式更新
- `miniprogram/pages/action-card-demo/index.wxml` - 演示页面模板
- `miniprogram/pages/action-card-demo/index.wxss` - 演示页面样式
- `miniprogram/pages/action-card-demo/index.js` - 演示页面逻辑
- `miniprogram/pages/action-card-demo/index.json` - 演示页面配置
- `miniprogram/app.json` - 注册演示页面

### Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |
| 2025-09-08 | 1.0     | ActionCard组件完整实现并替换所有目标区域         | James  |

### Status
Completed

## QA Results

- Result: Passed
- Test Plan: docs/qa/test-plan-action-card.md
- QA Report: docs/qa/results/action-card-qa-report-2025-09-09.md
- Notes:
  - 增强：`aria-disabled` 同步 loading；title/desc 长文案省略处理
  - 演示页覆盖基础/状态/长文案/无图标
