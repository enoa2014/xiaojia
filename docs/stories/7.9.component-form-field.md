# Story 7.9: 组件库 - FormField（含校验/错误/帮助文案）（P1）

## Status
Completed

## Story
作为终端用户，我希望表单字段（Label+Control+Help+Error）在所有表单页表现一致且错误提示清晰；作为开发者，我希望以复用组件快速落地校验与展示规范。

## Acceptance Criteria
1. 新增 `miniprogram/components/form-field/`，封装结构：`label`、`slot:control`、`helpText?`、`errorText?`；状态：`default|focus|error|disabled`。
2. 样式与间距对齐 `docs/uiux/design-system/components.md#表单字段`，错误提示遵循 `docs/specs/validation-rules.md`。
3. 与 Story 7.8 的 Button 兼容，形成统一表单区块。

## Tasks / Subtasks
- [x] 组件脚手架与状态实现（AC: 1）
- [x] 样式与校验文案规范对齐（AC: 2）
- [x] 与 Button 协作验证（AC: 3）

## Dev Notes
- 规范来源（Source: docs/uiux/design-system/components.md#表单字段、docs/specs/validation-rules.md）
- 目录与结构（Source: docs/architecture/01-frontend.md、docs/process/coding-standards.md）

### Testing
- 错误定位与滚动到首个错误字段（若页面有该交互）
- 不同状态切换的可视化一致性

## Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-08 | 0.1     | 初始草案                                     | BMAD   |
| 2025-09-08 | 0.2     | 通过 Story Draft Checklist，状态改为 Approved | BMAD   |

## Dev Agent Record

### Agent Model Used
claude-sonnet-4-20250514

### Completion Notes
- ✅ 创建了完整的 FormField 组件，包含 label、slot:control、helpText、errorText 四个核心部分
- ✅ 实现了 default/focus/error/disabled 四种状态，符合设计规范
- ✅ 样式完全对齐设计系统 tokens，使用统一的颜色、间距、字体规范
- ✅ 错误提示遵循 validation-rules.md 规范，支持实时校验和错误文案映射
- ✅ 与 Button 组件完美协作，表单提交流程完整
- ✅ 支持无障碍访问，包含正确的 ARIA 属性和 ID 关联
- ✅ 创建了完整的演示页面验证所有功能

### File List
- `miniprogram/components/form-field/index.wxml` - 组件模板
- `miniprogram/components/form-field/index.wxss` - 组件样式
- `miniprogram/components/form-field/index.js` - 组件逻辑
- `miniprogram/components/form-field/index.json` - 组件配置
- `miniprogram/pages/form-field-demo/index.wxml` - 演示页面模板
- `miniprogram/pages/form-field-demo/index.wxss` - 演示页面样式
- `miniprogram/pages/form-field-demo/index.js` - 演示页面逻辑
- `miniprogram/pages/form-field-demo/index.json` - 演示页面配置
- `miniprogram/pages/form-field-demo/test-integration.js` - 协作测试脚本
- `miniprogram/app.json` - 添加演示页面注册

### Change Log
| Date       | Version | Description                                  | Author |
|------------|---------|----------------------------------------------|--------|
| 2025-09-09 | 1.0     | 完成 FormField 组件实现和测试                 | James  |

## QA Results

- Result: Passed
- Test Plan: docs/qa/test-plan-form-field.md
- QA Report: docs/qa/results/form-field-qa-report-2025-09-09.md
- Notes:
  - ARIA 关联（labelledby/-describedby）正确；error 文案优先于 help
  - 建议后续按 7.10 在真实表单页全面替换旧容器
