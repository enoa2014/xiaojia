# 测试计划（MVP）

## 范围与目标
- 验证 MVP 范围内的功能可用性、正确性与安全性
- 覆盖关键角色路径：管理员/社工/志愿者

## 策略与层次
- 单元测试：云函数纯逻辑（校验/鉴权/过滤）
- 集成测试：云函数与数据库交互（使用测试库）
- 端到端：小程序关键流程（登录→查询→提交→审批）
- 可用性走查：弱网/空态/错误路径

## 环境与数据
- 环境：`cloud1-3grb87gwaba26b64`（测试库前缀/隔离）
- 数据：种子数据集（患者/入住/服务/活动），含边界/异常样本

## 通过门槛
- 关键功能通过率 100%，阻断性缺陷 0
- 覆盖率：函数核心模块 ≥70%

## 用例清单（样例）
- Patients：创建重复身份证 → E_CONFLICT
- Tenancies：同日同床位占用 → E_CONFLICT
- Services：审核流转 → 状态正确且审计记录
- Permissions：权限申请通过后，脱敏字段返回明文，到期回收
- Activities：容量满→候补；签到一次且幂等

## 工具与集成
- 微信开发者工具：端到端脚本
- @cloudbase/cli：DB 初始化与导入
- 日志与追踪：requestId 贯穿

