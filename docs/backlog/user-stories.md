# 用户故事库（MVP 范围）

本文档将 PRD/Epic 细化为开发可执行的用户故事，并配套验收标准与依赖。请用统一模板撰写并持续维护。

## 写作模板
- 作为：{角色}
- 我想要：{目标}
- 以便：{业务价值}

### 验收标准（示例模板）
- 场景1：Given {前置条件} When {操作} Then {结果}
- 场景2：...
- 非功能：性能/安全/可用性/可追踪性等（如：列表加载 ≤ 1.5s）

### 补充信息
- 设计链接：Figma/文档/截图
- 接口契约：函数名/字段/错误码
- 埋点：事件名/属性/触发时机

## 故事分组（按 Epic）

### Epic：档案管理（Patients）
- [ ] 故事：身份证唯一去重与冲突提示
- [ ] 故事：档案查看（脱敏/原始切换）
- [ ] 故事：档案搜索/筛选/分组

### Epic：入住/退住（Tenancies）
- [ ] 故事：新增入住记录（日期/房间/床位/补助）
- [ ] 故事：退住与排序展示

### Epic：服务记录（Services）
- [ ] 故事：志愿者提交服务记录（探访/心理/物资）
- [ ] 故事：社工审核/驳回并给出理由

### Epic：活动与报名（Activities/Registrations）
- [ ] 故事：活动发布、报名、签到
- [ ] 故事：候补队列与容量校验

### Epic：权限与脱敏（PermissionRequests）
- [ ] 故事：提交字段级权限申请与审批
- [ ] 故事：到期自动回收与审计

### Epic：统计与导出（Stats/ExportTasks）
- [ ] 故事：月度统计展示
- [ ] 故事：导出 Excel 并提供临时下载链接

## 依赖与假设（示例）
- 依赖：云函数 patients.list 已提供分页/排序/过滤
- 假设：身份证校验规则与遮蔽规则一致

## 估算与优先级
- 估算：S(≤1d)/M(1-3d)/L(>3d)
- 优先级：P0/P1/P2（映射里程碑）

## 变更记录
- v0.1 初始化骨架

